(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{55:function(e,t,i){e.exports=i(85)},60:function(e,t,i){},76:function(e,t,i){},77:function(e,t,i){},78:function(e,t,i){},79:function(e,t,i){},80:function(e,t,i){},85:function(e,t,i){"use strict";i.r(t);var s=i(0),a=i.n(s),r=i(26),n=(i(60),i(47));const c=new(i.n(n).a)({en:{leftRight:"Left <-> Right",beginIn:"Begin in ",upAndDown:"Up <-> Down",appName:"Eye Trainer",disclaimer:"Disclaimer: {0}",disclaimerTextPart1:"Please check with your Eye Doctor fist before starting exercises.\n Contact lenses cannot be worn before, during, after doing exercises.\n By continuing you agree to use this website at your own risk.",startExercise:"Start exercising by choosing difficulty ",startExerciseDescription:"Beginners should start with Easy level once a day during one week. After then moderate as you feel.\n You can pause any time by clicking on pause button or pressing 'space'.",easy:"Easy",medium:"Medium",tough:"Tough",rest:"Rest",next:"Next",finishedForToday:"You finished for today"},ru:{leftRight:"Лево <-> Право",beginIn:"Начало через ",upAndDown:"Верх <-> Низ",appName:"Тренер для глаз",disclaimer:"Заявления об отказе от ответственности: {0}",disclaimerTextPart1:"Пожалуйста проконсультируйтесь со свои доктором прежде чем начать упражнения. Нельза одевать конткатные линзы перед, во времмя и после упражнения. Начиная урпажнения вы соглашаетесь использовать данный веб ресурс на свой собственный риск.",startExercise:"Начните упражнение выбрав сложность",startExerciseDescription:'Для начинающих рекомендуется начать с Легкой степери сложности раз в день в течении недели. После этого смотритье по собственному самочувствию. Вы можте нажать на паузу в любое время исопльзуюя для этого кнопку на экране или "пробел".',easy:"Легко",medium:"Средне",tough:"Сложно",rest:"Отдых",next:"Следующее",finishedForToday:"Вы закончили упражнения на сегодня"}});var o=()=>a.a.createElement("div",{className:"App"},a.a.createElement("h1",{className:"programName"},c.appName),a.a.createElement("h3",null,c.formatString(c.disclaimer,c.disclaimerTextPart1)),a.a.createElement("br",null),a.a.createElement("h2",null,c.startExercise),a.a.createElement("h3",null,c.startExerciseDescription),a.a.createElement("br",null),a.a.createElement("a",{href:"exerciseBeginner",className:"start-button"},c.easy),a.a.createElement("a",{href:"exerciseIntermediate",className:"start-button"},c.medium),a.a.createElement("a",{href:"exerciseAdvanced",className:"start-button"},c.tough)),l=i(32),h=i(20);const d={};var u=(e=d,t)=>{switch(t.type){case"SET_EXERCISE":return t.payload.data;default:return e}};const p={height:0,width:0};var m=(e=p,t)=>{switch(t.type){case"SET_WINDOW_SIZE":return t.payload.data;default:return e}},y=Object(h.b)({currentExercise:u,windowSize:m});var x=i(49),E=i.n(x);const v=e=>({type:"SET_WINDOW_SIZE",payload:{data:e}});let S=(()=>{try{let e=localStorage.getItem("eyesTrainer");if(null===e)return;return JSON.parse(e)}catch(e){return void console.error("Can't load state",e)}})(),b=Object(h.c)(y,S);var w=b;b.subscribe(E()(()=>{(e=>{try{let t=JSON.stringify(e);localStorage.setItem("eyesTrainer",t)}catch(e){console.error("Can't save state",e)}})({userState:b.getState().userState})},500)),window.addEventListener("resize",(function(){b.dispatch(v({height:window.innerHeight,width:window.innerWidth}))})),b.dispatch(v({height:window.innerHeight,width:window.innerWidth}));i(76);var g=i(52),f=i(14),N=(i(77),i(78),i(50)),C=i(86),D=i(88),A=i(54),z=i(87),O=i(89);const k=e=>{let t=void 0!==e?e:10;return{type:"exercise",name:c.leftRight,delay:700,moves:["left","center","right","center"],repeat:t}},I=e=>{let t=void 0!==e?e:10;return{type:"exercise",name:c.upAndDown,delay:700,moves:["up","center","down","center"],repeat:t}},P=(e,t)=>({type:"delay",name:t,delay:1e3,moves:["center"],repeat:e}),T=e=>{void 0!==e&&e.unsubscribe()};i(79);class B extends a.a.Component{constructor(e){super(e),this.stateSub=new N.a,this.resultDebounce=this.stateSub.pipe(Object(C.a)(300)),this.subscription=void 0,this.exerciseSubscription=void 0,this.state={size:e.size,eyeAction:""},this.subscription=this.resultDebounce.subscribe(e=>{"state"===e.action&&this.setState(e.data)})}componentDidMount(){}componentDidUpdate(e,t,i){JSON.stringify(t)!==JSON.stringify(this.props)&&this.stateSub.next({action:"state",data:this.props})}componentWillUnmount(){T(this.subscription),T(this.exerciseSubscription)}render(){let e=this.state.size.width>this.state.size.height?this.state.size.height-5:this.state.size.width-5,t="";return this.state.eyeAction&&"left"===this.state.eyeAction?t+=" moveLeft":this.state.eyeAction&&"right"===this.state.eyeAction?t+=" moveRight":this.state.eyeAction&&"up"===this.state.eyeAction?t+=" moveUp":this.state.eyeAction&&"down"===this.state.eyeAction?t+=" moveDown":this.state.eyeAction&&"relax"===this.state.eyeAction&&(t+=" relax"),a.a.createElement("div",{className:"eyeHolder",style:{width:e,height:e/2}},a.a.createElement("div",{className:"eyeContainer",style:{width:e,height:e}},a.a.createElement("div",{className:t+" eye eyeLeft"}),a.a.createElement("div",{className:t+" eye eyeRight"})))}}var j=B,J=(i(80),i(23)),R=i(17);class W extends a.a.Component{constructor(e){super(e),this.changeButtonState=()=>{this.setState({play:!this.state.play}),this.props.onStateChage(this.state.play)},this.state={play:!!this.props.play}}componentDidUpdate(e,t,i){this.props.play!==t.play&&this.setState({play:!!this.props.play})}render(){let e=this.state.play?R.b:R.c;return a.a.createElement("div",{className:"pauseButtonContainer",onClick:this.changeButtonState},a.a.createElement(J.a,{icon:e,className:"icon"}))}}var U=W,_=i(51),H=i.n(_);class L extends a.a.Component{constructor(e){super(e),this.stateSub=new N.a,this.resultDebounce=this.stateSub.pipe(Object(C.a)(300)),this.subscription=void 0,this.exerciseSubscription=void 0,this.play=!0,this.currentExerciseSet=void 0,this.onPlayButtonChange=e=>{this.changePlayState(!e)},this.changePlayState=e=>{if(console.log("change Play State: ",e),this.play=void 0!==e?e:!this.play,this.setState({play:this.play}),this.play){var t,i;let e=(null===(t=this.state.currentExercise)||void 0===t?void 0:t.id)===(null===(i=this.currentExerciseSet)||void 0===i?void 0:i.repeat)?void 0:this.state.currentExercise;this.startExercise(this.currentExerciseSet,e)}else T(this.exerciseSubscription)},this.keyPressed=e=>{this.changePlayState()},this.state={windowSize:e.windowSize,play:this.play,currentExercise:void 0,exercises:e.activities,startDelay:e.startDelay},this.subscription=this.resultDebounce.subscribe(e=>{"winSize"===e.action&&this.setState({windowSize:this.props.windowSize})})}componentDidMount(){this.playNext()}playNext(){if(console.log("Play next current set: ",this.currentExerciseSet),T(this.exerciseSubscription),this.currentExerciseSet){for(let e=0;e<this.state.exercises.length;e++)if(e===this.currentSetId+1)return void this.startSet(e)}else this.startSet(0)}startSet(e){console.log("start set",e),this.currentSetId=e;let t=this.state.exercises.length>e+1?this.state.exercises[e+1]:void 0;this.setState({currentExerciseSet:this.state.exercises[e],nextExerciseSet:t,currentExercise:void 0}),this.startExercise(this.state.exercises[e])}startExercise(e,t){console.log("exercise, lastPosition",{exercise:e,lastPosition:t}),T(this.exerciseSubscription),this.currentExerciseSet=e,this.setState({currentExerciseSet:e,currentExercise:t}),this.exerciseSubscription=((e,t)=>{console.log("start: ",e);let i=new D.a,s=i.pipe(Object(z.a)(t=>Object(A.a)(t).pipe(Object(O.a)(e.delay))));if("exercise"===e.type)for(let s=0;s<e.repeat;s++)for(let a of e.moves)t&&void 0!==t.id&&!isNaN(t.id)?t.id>=s&&i.next({id:s,exercise:a}):i.next({id:s,exercise:a});else if("delay"===e.type)for(let s=e.repeat;s>-1;s--)for(let a of e.moves)t&&void 0!==t.id&&!isNaN(t.id)?t.id<=s&&i.next({id:s,exercise:a}):i.next({id:s,exercise:a});return i.complete(),s})(e,t).subscribe(e=>{this.setState({eyeAction:e.exercise,currentExercise:e})},e=>console.error("Error on exercise: ",e),()=>{setTimeout(()=>{this.playNext()},0)})}componentDidUpdate(e,t,i){JSON.stringify(t)!==JSON.stringify(this.props)&&this.stateSub.next({action:"winSize",data:{windowSize:this.props.windowSize}})}componentWillUnmount(){T(this.subscription),T(this.exerciseSubscription)}render(){var e,t,i,s,r,n,o,l,h,d,u;let p=void 0===(null===(e=this.state.currentExercise)||void 0===e?void 0:e.id)?1:this.state.currentExercise.id+1,m=void 0===(null===(t=this.state.currentExercise)||void 0===t?void 0:t.id)?null===(i=this.state.currentExerciseSet)||void 0===i?void 0:i.repeat:this.state.currentExercise.id,y=p+"/"+(null===(s=this.state.currentExerciseSet)||void 0===s?void 0:s.repeat),x=a.a.createElement("div",{className:"displayCount"},this.state.delayCount),E=a.a.createElement("div",{className:"displayNext"},c.next+": "," ",null===(r=this.state.nextExerciseSet)||void 0===r?void 0:r.name);return a.a.createElement("div",{className:"exerciseContainer"},void 0!==this.state.delayCount&&x,"delay"===(null===(n=this.state.currentExerciseSet)||void 0===n?void 0:n.type)&&a.a.createElement("div",{className:"displayCount"},null===(o=this.state.currentExerciseSet)||void 0===o?void 0:o.name," ",m),"finish"===(null===(l=this.state.currentExerciseSet)||void 0===l?void 0:l.type)&&a.a.createElement("div",{className:"displayCount"},null===(h=this.state.currentExerciseSet)||void 0===h?void 0:h.name),this.state.currentExerciseSet&&"exercise"===(null===(d=this.state.currentExerciseSet)||void 0===d?void 0:d.type)&&a.a.createElement("div",{className:"statusHolder"},a.a.createElement("div",{className:"currentStep"},null===(u=this.state.currentExerciseSet)||void 0===u?void 0:u.name),a.a.createElement("div",{className:"currentStep"},y)),E,a.a.createElement(j,{eyeAction:this.state.eyeAction,size:this.state.windowSize}),a.a.createElement(U,{onStateChage:this.onPlayButtonChange,play:this.state.play}),a.a.createElement(H.a,{handleKeys:["space"],onKeyEvent:this.keyPressed}))}}var F=Object(l.b)((e,t)=>({windowSize:e.windowSize}),null)(L);function M(){window.history.back()}const K=e=>{return[P(5,c.beginIn),k(e),P(5,c.rest),I(e),P(5,c.rest),k(e),P(5,c.rest),I(e),(t=c.finishedForToday,{type:"finish",name:t,delay:1e3,moves:["relax"],repeat:1})];var t},Y=K(5),Z=K(10),X=K(15);var q=()=>a.a.createElement(g.a,null,a.a.createElement("div",null,a.a.createElement(f.d,null,a.a.createElement(f.a,{exact:!0,from:"/",to:"/welcome"}),a.a.createElement(f.b,{path:"/exerciseBeginner"},a.a.createElement("a",{onClick:M,href:"#",className:"back"},a.a.createElement(J.a,{icon:R.a})),a.a.createElement(F,{activities:Y})),a.a.createElement(f.b,{path:"/exerciseIntermediate"},a.a.createElement("a",{onClick:M,href:"#",className:"back"},a.a.createElement(J.a,{icon:R.a})),a.a.createElement(F,{activities:Z})),a.a.createElement(f.b,{path:"/exerciseAdvanced"},a.a.createElement("a",{onClick:M,href:"#",className:"back"},a.a.createElement(J.a,{icon:R.a})),a.a.createElement(F,{activities:X})),a.a.createElement(f.b,{path:"/welcome"},a.a.createElement(o,null)))));Object(r.render)(a.a.createElement(l.a,{store:w},a.a.createElement(q,null)),document.getElementById("root"))}},[[55,1,2]]]);